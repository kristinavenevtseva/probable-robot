# Работа с тегами

Для типов карточек доступно использование тегов, которые систематизируют данные и упрощают их фильтрацию.

## Создание нового тега

Создание нового тега доступно тремя способами:
- Нажатием кнопки со значком “плюс” в правом верхнем углу открытой карточки и последующим нажатием в открывшемся окне кнопки **Создать и выбрать**.
- Нажатием кнопки "Тег" со значком "флажок" в представлении с карточками и последующим нажатием в открывшемся окне кнопки **Создать и выбрать**.
- Нажатием правой кнопки мыши на строке в представлении с карточками, выбором в открывшемся контекстном меню пункта **Добавить тег** и последующим нажатием в открывшемся окне кнопки **Создать и выбрать**.

Независимо от способа создания открывается окно новой карточки тега, в которой необходимо указать имя и выбрать цвет фона. Также можно настроить цвет текста.

По умолчанию тег доступен только его владельцу, но можно предоставить другим пользователям права использования и редактирования тега. Для этого используются поля **Общий с**, **Читатели** и **Редакторы**. Роли из поля **Редакторы** могут просматривать тег, добавлять и снимать его с карточек, а также редактировать его свойства. Роли из поля **Общий с** не имеют права редактировать тег, но могут его использовать: просматривать, добавлять и снимать с карточек. Роли из поля **Читатели** могут только просматривать тег. Если один и тот же пользователь или роль добавлены в несколько полей, то при работе с тегом по умолчанию используются высшие права. Например, если пользователь Иванов И.И. добавлен в поле **Редакторы** и в поле **Читатели**, то он может полноценно использовать и редактировать тег. 

Роли, добавленные в любое из полей **Общий с**, **Читатели** и **Редакторы**, будут видеть тег в представлении *CRM Arigamix -> Список объектов по тегам -> Теги с общим доступом*. У общих тегов есть специальная иконка рядом с названием тега. 

Владельцу отображаются все созданные им теги в представлении *CRM Arigamix -> Список объектов по тегам -> Мои теги*. При удалении пользователя из системы также происходит удаление всех созданных им тегов, включая общие.

После заполнения необходимых полей тега и нажатия кнопки **Сохранить и добавить** закроются диалоговые окна, тег будет создан и добавлен к карточке, при этом карточка автоматически сохранится.

## Добавление тега к карточке

Добавление тега к карточке доступно тремя способами:

- Нажатием кнопки со значком “плюс” в правом верхнем углу открытой карточки.
- Нажатием кнопки "Тег" со значком "флажок" в представлении с карточками. 
- Нажатием правой кнопки мыши на строке в представлении с карточками и выбором в открывшемся контекстном меню пункта Добавить тег.

Независимо от способа добавления открывается окно, в котором можно выбрать тег из числа уже существующих. Поддерживается возможность одновременного выбора нескольких тегов: для этого нужно выделить их флажками и нажать кнопку **ОК**. Также доступно создание и добавление нового тега нажатием в окне кнопки **Создать и выбрать**.

По умолчанию в карточке и в представлении для одной записи отображаются пять первых тегов при сортировке в алфавитном порядке. Изменить максимальное количество отображаемых тегов можно в меню пользователя *Настройки -> Мои настройки -> Персонализация* в поле **Максимальное число отображаемых тегов**. Если тегов у карточки много, то они свернуты под кнопкой с изображением трёх точек, которая расположена рядом с тегами. При нажатии на кнопку открывается список свёрнутых тегов. 

При нажатии на тег открывается контекстное меню, с помощью которого можно отредактировать его свойства, удалить из карточки, либо перейти в тег. При нажатии **Перейти в тег** будет открыто представление, содержащее все карточки, помеченные указанным тегом. Также это представление можно открыть, выбрав данный тег в представлениях *CRM Arigamix -> Список объектов по тегам -> Мои теги* или *CRM Arigamix -> Список объектов по тегам -> Теги с общим доступом*. 

В зависимости от настроек конкретного представления теги отображаются не только в карточке, но и в представлении: либо над строкой, либо под строкой, либо в отдельной колонке. Также доступно отключение отображения тегов для определенного представления.

## Поисковый запрос с тегами

В представлениях с карточками доступно выполнение фильтрации карточек по тегам, добавленным к ним. Фильтрация выполняется нажатием в представлении кнопки **Найти по тегу**. После указания тегов в открывшемся окне, производится фильтрация и в представлении отображаются только карточки, к которым добавлены выбранные теги.

Также у пользователя есть возможность сохранить поисковые запросы по тегам. Для этого необходимо в представлении перейти в настройки фильтрации по кнопке Фильтр. В открывшемся окне настроек фильтрации необходимо указать теги, после чего нажать кнопку **Сохранить как…**. ся поля Общий с, Читатели и Редакторы. Р

В открывшемся окне необходимо указать название поискового запроса. Все сохраненные пользователем запросы отображаются в разделе “Мои запросы” и доступны только текущему пользователю. “Общие запросы” - запросы, доступные всем сотрудникам системы, создаются Администраторами.

Сохраненный поисковый запрос можно вызывать с помощью нажатия левой кнопки мыши в окне настроек фильтрации.

Английские скрины:
